<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Passing Variables with Get Method</title>
<script type="text/javascript" 
         src="Library.js" >//Get Function
</script>

<script type="text/javascript">
// Return the document's cookies as an object of name/value pairs.
// Assume that cookie values are encoded with encodeURIComponent().
function getCookies(cName) {
	var cVal=document.cookie;
	var cBeg= cVal.indexof("" +cName+"=");

if (cBeg== -1){
	cVal=null;
	}
	else{
		cBeg=cVal.indexof("=",cBeg) + 1;
		var cEnd = cVal.indexof (";", cBeg);
		if(cEnd == -1){
			cEnd = cVal.length;
			}
			cVal = unescape(cval.substring(cBeg,Cend));
	}
	return cVal;
	}

//    var cookies = {};           // The object we will return
//    var all = document.cookie;  // Get all cookies in one big string
//    if (all === "")             // If the property is the empty string
//        return cookies;         // return an empty object
//    var list = all.split("; "); // Split into individual name=value pairs
	
//document.write (" value from list variable"+"="+list+"<p>" );
	
//    for(var i = 0; i < list.length; i++) {  // For each cookie
//		var cookie = list[i];
//        var p = cookie.indexOf("=");        // Find the first = sign
//		var name = cookie.substring(0,p);   // Get cookie name
//        var value = cookie.substring(p+1);  // Get cookie value
//        value = decodeURIComponent(value);  // Decode the value
//        cookies[name] = value;              // Store name and value in object
		
//    }
	
    //return cookies;
//}
// Store the name/value pair as a cookie, encoding the value with 
// encodeURIComponent() in order to escape semicolons, commas, and spaces.
// If daysToLive is a number, set the max-age attribute so that the cookie
// expires after the specified number of days. Pass 0 to delete a cookie.
function setCookie(name, value, secondsToLive) {
    var cookie = name + "=" + encodeURIComponent(value);
    if (typeof daysToLive === "number") 
        cookie += "; max-age=" + (daysToLive);
    document.cookie = cookie;
}
</script>
</head>

<body>
<script type="text/javascript">
        //Place into the $_GET object
    var $_GET=getFormInfo(location.href);
        //Test JSON to stringify and parse back
        var str=JSON.stringify($_GET);
		

        //Test the Cookie class
        var seconds=150;
        //Set a cookieWith a function
        setCookie("WithAFunction", str, seconds);
        //setCookie("SetAnother","My name is Farhan Khan" , seconds);
        //Retrieve all the cookies
        cookiesObj=getCookies(withAFunction);
        document.write("<p> Display all the function cookies </br>");
		
        for(var name in cookiesObj){
            document.write(name+"="+cookiesObj[name]+"</P>");
           
	  }
	 
</script>
</body>
</html>
